(function(c,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(c=typeof globalThis<"u"?globalThis:c||self,f(c.Respond={}))})(this,function(c){"use strict";let f=0;const g=()=>f++;let A=0;const $=()=>A++,y={},l=new Map,h=(t,e)=>{l.set(t,[...l.get(t)??[],e])};function a(t){return y[t]}function b(t){const e=new CustomEvent(`state::${t}`,{}),r=l.get(t)??[];for(const n of r){const o=document.getElementById(n);o&&o.dispatchEvent(e)}}function S(t,e){return new Proxy(e,{get:(r,n)=>n==="push"?(...o)=>{r[n](...o),b(t)}:r[n]})}function C(t,e){const r={};for(const n in e)if(Array.isArray(e[n])){r[n]=S(t,e[n]);for(let o=0;o<e[n].length;o++)typeof e[n][o]=="object"&&(e[n][o]=C(t,e[n][o]))}else r[n]=e[n];return r}function E(t){const e=`state-${$()}`,r=C(e,t);return y[e]=new Proxy(r,{get:(n,o)=>n[o],set:(n,o,i)=>(Array.isArray(i)?n[o]=S(e,i):n[o]=i,b(e),!0)}),e}const m=Symbol("Reactive"),s=Symbol("ReactiveChildren"),w=(t,e)=>({[m]:!0,tag:t,getValue:e}),R=(t,e)=>({[s]:!0,tag:t,getChildren:e}),j=t=>{const e=[],r=n=>n.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();for(let n in t){const o=r(n);e.push(`${o}: ${t[n]};`)}return e.join(" ")};function u(t,e,r){const n=document.createElement(t);n.id=e.id??`${t}-${g()}`,r==null&&(Array.isArray(e)||e[s]?(r=e,e={}):e==null&&(e={}));for(const o in e){if(e[o][m]){const{tag:i,getValue:v}=e[o];n[o]=v(a(i)),n.addEventListener(`state::${i}`,()=>{n[o]=v(a(i))}),h(i,n.id);continue}if(o==="style"&&typeof e[o]=="object"){n[o]=j(e[o]);continue}n[o]=e[o]}if(!Array.isArray(r)&&r?.[s]){const{tag:o,getChildren:i}=r;r=i(a(o)),n.addEventListener(`state::${o}`,()=>{n.replaceChildren(...i(a(o)).map(d))}),h(o,n.id)}return[n,r]}function T(t,e){return u("button",t,e)}function _(t,e){return u("p",t,e)}function I(t,e){return u("input",t,e)}function L(t,e){return u("div",t,e)}function P(t,e){return u("h1",t,e)}function M(t,e){return u("h2",t,e)}function Z(t,e){return u("h3",t,e)}function q(t,e){return u("h4",t,e)}const d=t=>{const[e,r]=t;if(r==null)return e;for(const n of r)e.appendChild(d(n));return e};function z(t,e){const r=document.querySelector(t);if(r!=null)for(const n of e)r.appendChild(d(n))}c.ReactiveChildren=s,c.ReactiveSymbol=m,c.button=T,c.createApp=z,c.createComponent=d,c.createState=E,c.div=L,c.getState=a,c.h1=P,c.h2=M,c.h3=Z,c.h4=q,c.input=I,c.p=_,c.reactive=w,c.reactiveChildren=R,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
